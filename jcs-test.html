<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic Meta -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>About JCS · Prayer Wall | Jesus Christ Saves Token (JCS)</title>
  <meta name="description" content="Learn about Jesus Christ Saves Token (JCS) and join our Prayer Wall — a digital altar for faith, prayers, and fellowship on the XRPL. Set your trustline, sign the ledger, and be part of a faith-driven crypto community." />
  <meta name="keywords" content="Jesus Christ Saves Token, JCS, Prayer Wall, Christian Cryptocurrency, XRPL, XRP Ledger, Faith Blockchain, Crypto Ministry, Christian Prayer" />
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />

  <!-- Canonical & Language -->
  <link rel="canonical" href="https://jesuschristsavestoken.com/about-jcs.html" />
  <link rel="alternate" hreflang="en" href="https://jesuschristsavestoken.com/about-jcs.html" />

  <!-- Favicons & App Icons (keep your working paths) -->
  <link rel="icon" href="https://jesuschristsavestoken.com/jcs-logo.png" type="image/png" />
  <link rel="icon" type="image/png" sizes="16x16" href="https://jesuschristsavestoken.com/jcs-logo-16.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="https://jesuschristsavestoken.com/jcs-logo-32.png" />
  <link rel="icon" type="image/png" sizes="192x192" href="https://jesuschristsavestoken.com/jcs-logo-192.png" />
  <link rel="icon" type="image/png" sizes="512x512" href="https://jesuschristsavestoken.com/jcs-logo-512.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="https://jesuschristsavestoken.com/jcs-logo-180.png" />
  <link rel="mask-icon" href="https://jesuschristsavestoken.com/safari-pinned-tab.svg" color="#004e92" />
  <meta name="msapplication-TileImage" content="https://jesuschristsavestoken.com/jcs-logo-270.png" />
  <meta name="msapplication-TileColor" content="#004e92" />
  <meta name="theme-color" content="#004e92" />

  <!-- Open Graph -->
  <meta property="og:locale" content="en_US" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Jesus Christ Saves Token" />
  <meta property="og:title" content="About JCS · Prayer Wall | Jesus Christ Saves Token (JCS)" />
  <meta property="og:description" content="A digital altar for faith, prayers, and fellowship on the XRPL. Learn about our mission and join the Prayer Wall." />
  <meta property="og:url" content="https://jesuschristsavestoken.com/about-jcs.html" />
  <meta property="og:image" content="https://jesuschristsavestoken.com/jcs-logo.png" />
  <meta property="og:image:alt" content="Jesus Christ Saves Token Logo" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@JesusCS_token" />
  <meta name="twitter:title" content="About JCS · Prayer Wall | Jesus Christ Saves Token (JCS)" />
  <meta name="twitter:description" content="Join the Prayer Wall and learn about the JCS mission: faith + transparency on the XRPL." />
  <meta name="twitter:image" content="https://jesuschristsavestoken.com/jcs-logo.png" />

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Jesus Christ Saves Token",
    "url": "https://jesuschristsavestoken.com/",
    "logo": "https://jesuschristsavestoken.com/jcs-logo.png",
    "sameAs": ["https://twitter.com/JesusCS_token"]
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "About JCS · Prayer Wall",
    "url": "https://jesuschristsavestoken.com/about-jcs.html",
    "description": "About Jesus Christ Saves Token (JCS) and our Prayer Wall — a digital altar for faith, prayers, and fellowship on the XRPL."
  }
  </script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800&family=Dancing+Script:wght@500&display=swap" rel="stylesheet" />

  <!-- Styles -->
  <style>
    :root {
      --gold-1:#ffd700;
      --gold-2:#fff8dc;
      --blue-1:#000428;
      --blue-2:#004e92;
      --muted:#b8c7e0;
      --ink:#2f3040;
      --parch:#fdfaf5;
      --parch-2:#fbf7ef;
      --panel:#f3f7ff;
      --accent:#004e92;
      --accent-2:#0b6bda;
      --amen:#22c55e;
      --danger:#c62828;
      --glow:0 0 24px rgba(255,255,255,.55);
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:'Montserrat',sans-serif;
      color:#fff;
      background:
        radial-gradient(1600px 800px at 50% -10%, rgba(255,255,255,.12), transparent),
        linear-gradient(180deg, var(--blue-1), var(--blue-2));
      line-height:1.8; overflow-x:hidden;
    }
    body::before{
      content:""; position:fixed; inset:0; pointer-events:none; z-index:-1;
      background:
        radial-gradient(1200px 600px at 50% -20%, rgba(255,255,255,.18), transparent 60%),
        conic-gradient(from 200deg at 50% 10%, rgba(255,255,255,.06), transparent 40% 80%, rgba(255,255,255,.06));
      filter: blur(1px);
    }

    a{color:#00d4ff; text-decoration:none}
    a:hover{text-decoration:underline}

    header{
      position:fixed; inset:0 0 auto 0; width:100%; z-index:1000;
      background:rgba(0,0,0,.55); backdrop-filter: blur(8px);
      border-bottom:1px solid rgba(255,255,255,.08);
      display:flex; align-items:center; justify-content:space-between;
      padding:10px 28px;
    }
    header img{height:48px; filter: drop-shadow(0 0 12px rgba(255,255,255,.4));}
    nav a{margin:0 12px; font-weight:800; letter-spacing:.2px}
    .sign-ledger-btn{
      display:inline-block;
      background:linear-gradient(90deg,var(--gold-1),var(--gold-2));
      color:#000 !important;
      padding:10px 20px; border-radius:26px;
      box-shadow:0 0 20px rgba(255,215,0,.8);
      font-weight:800; border:1px solid rgba(0,0,0,.12);
      transition:transform .25s ease, box-shadow .25s ease, filter .25s ease;
    }
    .sign-ledger-btn:hover{
      transform:translateY(-1px) scale(1.03);
      box-shadow:0 0 28px rgba(255,255,255,1);
      text-decoration:none; filter:saturate(1.1);
    }

    main{padding-top:100px}

    /* Hero / Mission */
    .hero{
      max-width:1100px; margin:32px auto 0; padding:24px 20px;
      text-align:center;
    }
    .hero h1{
      font-size:clamp(1.9rem,4vw,2.6rem);
      font-weight:800; text-shadow:var(--glow);
    }
    .hero p{margin:10px auto 0; max-width:920px; color:var(--muted)}
    .hero .verse{
      font-family:'Dancing Script', cursive;
      margin:16px auto 0; max-width:900px;
      background:rgba(255,255,255,.1);
      border:1px solid rgba(255,255,255,.12);
      border-left:6px solid var(--gold-1);
      border-radius:12px; padding:14px 16px; font-size:1.3rem;
      box-shadow:0 0 22px rgba(255,255,200,.35);
      transition: opacity .45s ease;
    }

    /* Containers */
    .container{
      max-width:1100px; margin:22px auto; padding:22px 20px;
      background:rgba(253,250,245,.94); color:var(--ink);
      border-radius:14px; box-shadow:0 8px 28px rgba(0,0,0,.25);
      backdrop-filter: blur(2px);
    }
    .container h2{
      text-align:center; margin-bottom:8px; color:#0e1a2f; font-weight:800;
      text-shadow:0 0 14px rgba(0,212,255,.55);
    }
    .container p.lead{color:#23304a}

    /* Controls */
    .top-controls{
      margin-top:12px; display:flex; gap:12px; flex-wrap:wrap; align-items:center; justify-content:center;
    }
    .music-toggle, .export-btn{
      background: var(--accent); color:#fff; border:none;
      padding:.6rem .9rem; border-radius:10px; cursor:pointer; font-weight:800;
      transition: background .25s ease, transform .05s ease;
    }
    .music-toggle:hover, .export-btn:hover{ background: var(--accent-2); }
    .music-toggle:active, .export-btn:active{ transform: translateY(1px); }

    /* Prayer Wall */
    .collapsible{
      background:linear-gradient(90deg,#0b3b7a,#0f56b1);
      color:#fff; padding:1rem; cursor:pointer; border:none;
      border-radius:12px; font-weight:800; width:100%;
      box-shadow: 0 8px 26px rgba(0,0,0,.22);
      transition: filter .25s ease, transform .05s ease;
    }
    .collapsible:hover{ filter: brightness(1.07); }
    .content{ display:none; margin-top:16px; }

    .stats{
      display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin:12px 0;
    }
    .stat{
      background:#ffffff; border:1px solid #e6e6e6; border-radius:12px; padding:10px 14px;
      box-shadow:0 6px 14px rgba(0,0,0,.08);
      font-weight:800; color:#0b2040;
    }

    .flex-sections{ display:flex; gap:20px; flex-wrap:wrap; }
    .section{
      flex:1; min-width:300px; background: var(--panel); border-radius:12px; padding:14px;
      box-shadow:0 4px 18px rgba(0,0,0,.08); display:flex; flex-direction:column;
      max-height:560px; border:2px solid transparent; transition: border-color .25s ease;
    }
    .section:hover{ border-color: var(--gold-1); }
    .section h3{ margin-bottom:6px; color:#09203a }

    #prayers, #answered-list{ max-height:460px; overflow-y:auto; overflow-x:hidden; padding-right:6px; }

    /* Form */
    .prayer-form{ display:flex; flex-direction:column; gap:10px; margin-bottom:.5rem; }
    .prayer-form input, .prayer-form textarea{
      padding:.85rem; border-radius:10px; border:1px solid #cfcfcf; background:var(--parch-2);
      transition: box-shadow .25s ease, border-color .25s ease;
    }
    .prayer-form input:focus, .prayer-form textarea:focus{
      box-shadow:0 0 7px rgba(0,78,146,.35); outline:none; border-color: var(--accent);
    }
    .prayer-form button{
      background: linear-gradient(90deg,#0f56b1,#2a7ae4);
      color:#fff; padding:.9rem; border:none; border-radius:10px; cursor:pointer; font-weight:800;
      transition: filter .25s ease, transform .05s ease;
    }
    .prayer-form button:hover{ filter:brightness(1.06) }
    .prayer-form button:active{ transform: translateY(1px) }

    .read-wrap{ display:flex; align-items:center; gap:8px; color:#0e2a55 }
    .read-wrap input[type="checkbox"]{ transform: scale(1.2); accent-color: var(--amen); }

    /* Items */
    .prayer-item{
      background: var(--parch);
      border-left: 5px solid #0f3a71;
      border-radius: 12px;
      padding: 0.9rem;
      margin-bottom: 12px;
      display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,.06);
      opacity: 0; animation: fadeInUp .7s forwards;
    }
    .item-main{ display:flex; align-items:center; gap:12px; }
    .name{ font-weight:800; color:#0e2a55 }
    .text{ color:#1f2f4a }

    .controls{ display:flex; gap:8px; flex-wrap:wrap; justify-self:end; }
    .btn{ border:none; padding:7px 11px; border-radius:9px; cursor:pointer; color:#fff; font-weight:800; transition: filter .2s ease }
    .btn:hover{ filter: brightness(1.05); }
    .btn-amen{ background: var(--amen); }
    .btn-edit{ background: #5f7580; }
    .btn-delete{ background: var(--danger); }
    .btn-answered{ background: #b48806; } /* gold-ish */
    .btn-restore{ background: #6c5ce7; }

    /* Candle feedback */
    .candle{
      position: fixed; right: 18px; bottom: 18px; z-index: 5;
      background: rgba(255,255,255,.95); color:#0e1a2f;
      padding: 8px 12px; border-radius: 999px; box-shadow: 0 6px 20px rgba(0,0,0,.25);
      display:none; align-items:center; gap:8px;
    }
    .candle.on{ display:flex; animation: fadeIn .3s ease; }
    .flame{ font-size: 1.15rem; animation: flicker 1s infinite ease-in-out; }
    @keyframes flicker{ 0%,100%{transform:translateY(0) scale(1);opacity:.9} 50%{transform:translateY(-1px) scale(1.05);opacity:1} }

    /* New highlight */
    .new-highlight{
      box-shadow: 0 0 0 2px var(--gold-1) inset, 0 0 16px rgba(255,215,0,.4);
      animation: glowOut 2.2s ease forwards;
    }
    @keyframes glowOut{ 0%{box-shadow:0 0 0 2px var(--gold-1) inset, 0 0 18px rgba(255,215,0,.55);} 100%{box-shadow:none;} }

    /* Generic animations */
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
    @keyframes fadeInUp{from{opacity:0; transform:translateY(16px)}to{opacity:1; transform:translateY(0)}}

    /* Footer */
    footer{
      text-align:center; padding:38px 20px 64px; color:var(--muted);
      border-top:1px solid rgba(255,255,255,.08); background: rgba(0,0,0,.45); margin-top:36px;
    }

    /* Mobile */
    @media (max-width: 900px){
      .flex-sections{flex-direction:column}
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <img src="https://jesuschristsavestoken.com/jcs-logo.png" alt="Jesus Christ Saves Token Logo" />
    <nav>
      <a href="index.html">Home</a>
      <a href="Prayer-Map.html">Prayer Map</a>
      <a href="verify.html" class="sign-ledger-btn">🖋 Sign the Ledger</a>
    </nav>
  </header>

  <main>
    <!-- Hero / Mission -->
    <section class="hero" aria-label="About JCS and Prayer Wall">
      <h1>About JCS · Prayer Wall</h1>
      <p class="lead">A digital altar for faith, prayers, and fellowship on the XRPL — blending Gospel mission with transparent, open technology.</p>
      <div id="verseBox" class="verse" aria-live="polite">Loading verse…</div>
      <div class="top-controls">
        <button id="music-toggle" class="music-toggle" aria-label="Toggle background worship music">🎵 Play Ambient Worship</button>
        <button id="export-btn" class="export-btn" aria-label="Export prayers as JSON">⬇️ Export Prayers (JSON)</button>
        <audio id="bg-music" loop preload="none" src="music/ambient.mp3"></audio>
      </div>
    </section>

    <!-- About Container -->
    <section class="container">
      <h2>Our Mission</h2>
      <p class="lead">
        Jesus Christ Saves Token (JCS) exists to spread the good news of salvation through our Lord and Savior, Jesus Christ.
        We proclaim the Gospel through the Bible and our witness — and also through the tools of our time, including the XRP Ledger.
        By combining faith and innovation, we create a place where believers share prayers, lift each other up, and demonstrate the love of God in a digital world.
        Through JCS, we carry the message of Christ to the nations, showing that His light shines in every frontier.
      </p>
    </section>

    <!-- Prayer Wall -->
    <section class="container prayer-wall-container" aria-label="Interactive Prayer Wall">
      <button type="button" class="collapsible" id="toggleWall">Show / Hide Prayer Wall</button>
      <div class="content" id="wall" aria-expanded="false">
        <div class="stats" role="status" aria-live="polite">
          <div class="stat">Active: <span id="stat-active">0</span></div>
          <div class="stat">Marked as Prayed: <span id="stat-answered">0</span></div>
          <div class="stat">Total Amens: <span id="stat-amens">0</span></div>
        </div>

        <div class="flex-sections">
          <div class="section">
            <h3>Post a Prayer 🙏</h3>
            <form id="prayer-form" class="prayer-form" autocomplete="off">
              <input type="text" id="name" placeholder="Your Name" required aria-label="Your name">
              <textarea id="prayer" placeholder="Write your prayer..." rows="4" required aria-label="Your prayer"></textarea>
              <label class="read-wrap" style="justify-content:flex-start;">
                <input type="checkbox" id="private"> Keep my prayer private
              </label>
              <button type="submit">Submit Prayer</button>
              <div id="success-message" style="display:none;color:#0b7b2c;font-weight:800;">Your prayer has been posted 🕯</div>
            </form>

            <div class="list-subtitle" style="margin:.3rem 0 .5rem; color:#40506b;">Active Prayers</div>
            <div id="prayers" aria-live="polite"></div>
          </div>

          <div class="section">
            <h3>Marked as Prayed 🕊</h3>
            <div id="answered-list" aria-live="polite"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Community Covenant -->
    <section class="container" aria-label="Community Covenant">
      <h2>Community Covenant</h2>
      <p class="lead">
        This Prayer Wall is a sacred space. By posting or responding here, you agree to:
      </p>
      <ul style="margin-top:10px; color:#23304a; padding-left:18px;">
        <li>Speak in love and truth, mindful that the Lord hears every word.</li>
        <li>Protect privacy; avoid sharing personal details others haven’t made public.</li>
        <li>Encourage one another, bearing each other’s burdens (Galatians 6:2).</li>
        <li>Use Amen and “Marked as Prayed” sincerely — as real acts of prayer.</li>
      </ul>
      <p class="lead" style="margin-top:10px;">
        A portion of future JCS community initiatives may be directed toward ministries and needs surfaced by this wall, guided by transparent on-ledger processes.
      </p>
    </section>
  </main>

  <!-- Candle -->
  <div class="candle" id="candle"><span class="flame">🕯</span><span>Submitted</span></div>

  <!-- Scripts -->
  <script>
    // ===== Verse: Live API (fallback to curated rotation) =====
    const verseBox = document.getElementById("verseBox");
    const curated = [
      "“The thief comes only to steal and kill and destroy; I have come that they may have life, and have it to the full.” — John 10:10",
      "“For God so loved the world that he gave his one and only Son, that whoever believes in him shall not perish but have eternal life.” — John 3:16",
      "“I can do all things through Christ who strengthens me.” — Philippians 4:13",
      "“The Lord is my shepherd, I lack nothing.” — Psalm 23:1",
      "“Come to me, all you who are weary and burdened, and I will give you rest.” — Matthew 11:28"
    ];
    let vIdx = 0;

    async function tryVerseAPI(){
      try {
        const res = await fetch("https://labs.bible.org/api/?passage=votd&type=json");
        if (!res.ok) throw new Error("Verse API error");
        const data = await res.json();
        const v = data && data[0];
        if (v) {
          verseBox.textContent = `${v.bookname} ${v.chapter}:${v.verse} — "${v.text}"`;
          return true;
        }
      } catch (e) { /* silent fallback */ }
      return false;
    }

    function rotateCurated(){
      verseBox.style.opacity = 0;
      setTimeout(()=>{
        verseBox.textContent = curated[vIdx];
        verseBox.style.opacity = 1;
        vIdx = (vIdx + 1) % curated.length;
      }, 350);
    }

    (async () => {
      const ok = await tryVerseAPI();
      if (!ok) {
        verseBox.textContent = curated[vIdx];
        setInterval(rotateCurated, 20000);
      }
    })();

    // ===== Nav: Music Toggle + Export =====
    const musicBtn = document.getElementById("music-toggle");
    const musicEl  = document.getElementById("bg-music");
    const exportBtn = document.getElementById("export-btn");
    const musicOn = localStorage.getItem("musicOn") === "true";

    const setMusicButtonText = (on) => {
      musicBtn.textContent = on ? "🎵 Pause Ambient Worship" : "🎵 Play Ambient Worship";
    };
    setMusicButtonText(musicOn);
    if (musicOn) {
      const tryPlay = () => musicEl.play().catch(()=>{});
      document.body.addEventListener("click", tryPlay, { once: true });
    }
    musicBtn.addEventListener("click", async () => {
      if (musicEl.paused) {
        try { await musicEl.play(); localStorage.setItem("musicOn", true); setMusicButtonText(true); }
        catch(e){ /* ignore */ }
      } else {
        musicEl.pause(); localStorage.setItem("musicOn", false); setMusicButtonText(false);
      }
    });

    // ===== Prayer Wall Logic =====
    const toggleWallBtn = document.getElementById("toggleWall");
    const wall = document.getElementById("wall");
    const statActive   = document.getElementById("stat-active");
    const statAnswered = document.getElementById("stat-answered");
    const statAmens    = document.getElementById("stat-amens");

    const form = document.getElementById("prayer-form");
    const activeEl = document.getElementById("prayers");
    const answeredEl = document.getElementById("answered-list");
    const successMsg = document.getElementById("success-message");
    const candle = document.getElementById("candle");

    // Show/Hide (persist)
    const isOpen = localStorage.getItem("prayerWallOpen") === "true";
    wall.style.display = isOpen ? "block" : "none";
    wall.setAttribute("aria-expanded", isOpen ? "true" : "false");
    toggleWallBtn.addEventListener("click", () => {
      const open = wall.style.display === "block";
      wall.style.display = open ? "none" : "block";
      wall.setAttribute("aria-expanded", open ? "false" : "true");
      localStorage.setItem("prayerWallOpen", (!open).toString());
    });

    // Load + migrate
    let prayers = JSON.parse(localStorage.getItem("prayers") || "[]");
    prayers = prayers.map((p, i) => ({
      id: p.id || (Date.now() + i + Math.floor(Math.random()*1000)),
      name: p.name || "Anonymous",
      text: p.text || "",
      read: !!p.read,
      amens: p.amens || 0,
      answered: !!p.answered,
      createdAt: p.createdAt || Date.now()
    }));
    const savePrayers = () => localStorage.setItem("prayers", JSON.stringify(prayers));
    const byId = (id) => prayers.findIndex(x => x.id === id);

    // Export JSON
    exportBtn.addEventListener("click", () => {
      const blob = new Blob([JSON.stringify(prayers, null, 2)], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url; a.download = "jcs-prayers.json";
      document.body.appendChild(a); a.click(); a.remove();
      setTimeout(()=>URL.revokeObjectURL(url), 1000);
    });

    function createItem(prayer, answeredList=false){
      const wrap = document.createElement("div");
      wrap.className = "prayer-item";
      wrap.dataset.id = prayer.id;

      const main = document.createElement("div");
      main.className = "item-main";

      const readWrap = document.createElement("label");
      readWrap.className = "read-wrap";
      const cb = document.createElement("input");
      cb.type = "checkbox";
      cb.checked = !!prayer.read;
      cb.title = "Mark as read";
      cb.addEventListener("change", () => {
        const idx = byId(prayer.id);
        if (idx>-1) { prayers[idx].read = cb.checked; savePrayers(); }
      });
      readWrap.appendChild(cb);

      const meta = document.createElement("div");
      const name = document.createElement("span"); name.className="name"; name.textContent = prayer.name + ": ";
      const text = document.createElement("span"); text.className="text"; text.textContent = prayer.text;
      meta.appendChild(name); meta.appendChild(text);

      main.appendChild(readWrap);
      main.appendChild(meta);

      const controls = document.createElement("div");
      controls.className = "controls";

      const amenBtn = document.createElement("button");
      amenBtn.className = "btn btn-amen";
      amenBtn.innerHTML = `💙 Amen (${prayer.amens||0})`;
      amenBtn.addEventListener("click", () => {
        const idx = byId(prayer.id);
        if (idx>-1) {
          prayers[idx].amens = (prayers[idx].amens || 0) + 1;
          savePrayers(); renderAll();
        }
      });

      const editBtn = document.createElement("button");
      editBtn.className = "btn btn-edit";
      editBtn.textContent = "Edit";
      editBtn.addEventListener("click", () => {
        const idx = byId(prayer.id);
        if (idx>-1) {
          const newText = prompt("Edit prayer text:", prayers[idx].text);
          if (newText !== null && newText.trim() !== "") {
            prayers[idx].text = newText.trim();
            savePrayers(); renderAll();
          }
        }
      });

      const delBtn = document.createElement("button");
      delBtn.className = "btn btn-delete";
      delBtn.textContent = "Delete";
      delBtn.addEventListener("click", () => {
        if (confirm("Delete this prayer?")) {
          const idx = byId(prayer.id);
          if (idx>-1){ prayers.splice(idx,1); savePrayers(); renderAll(); }
        }
      });

      controls.appendChild(amenBtn);
      controls.appendChild(editBtn);
      controls.appendChild(delBtn);

      if (!answeredList){
        const ansBtn = document.createElement("button");
        ansBtn.className = "btn btn-answered";
        ansBtn.textContent = "🙏 Mark as Prayed";
        ansBtn.addEventListener("click", () => {
          const idx = byId(prayer.id);
          if (idx>-1){ prayers[idx].answered = true; savePrayers(); renderAll(); }
        });
        controls.appendChild(ansBtn);
      } else {
        const restoreBtn = document.createElement("button");
        restoreBtn.className = "btn btn-restore";
        restoreBtn.textContent = "Restore";
        restoreBtn.addEventListener("click", () => {
          const idx = byId(prayer.id);
          if (idx>-1){ prayers[idx].answered = false; savePrayers(); renderAll(); }
        });
        controls.appendChild(restoreBtn);
      }

      wrap.appendChild(main);
      wrap.appendChild(controls);
      return wrap;
    }

    function updateStats(){
      const active = prayers.filter(p => !p.answered);
      const answered = prayers.filter(p => p.answered);
      const amens = prayers.reduce((sum,p)=>sum+(p.amens||0),0);
      statActive.textContent = active.length.toString();
      statAnswered.textContent = answered.length.toString();
      statAmens.textContent = amens.toString();
    }

    function renderAll(){
      activeEl.innerHTML = "";
      answeredEl.innerHTML = "";
      const active = prayers.filter(p => !p.answered).sort((a,b)=>b.createdAt-a.createdAt);
      const answered = prayers.filter(p => p.answered).sort((a,b)=>b.createdAt-a.createdAt);
      active.forEach(p => activeEl.appendChild(createItem(p,false)));
      answered.forEach(p => answeredEl.appendChild(createItem(p,true)));
      updateStats();
    }

    // Submit
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const name = (document.getElementById("name").value || "Anonymous").trim();
      const textRaw = (document.getElementById("prayer").value || "").trim();
      const priv = document.getElementById("private").checked;
      if (!textRaw) return;

      const entry = {
        id: Date.now(),
        name,
        text: priv ? "[Private Prayer]" : textRaw,
        read: false,
        amens: 0,
        answered: false,
        createdAt: Date.now()
      };
      prayers.unshift(entry);
      savePrayers();
      form.reset();

      successMsg.style.display = "block";
      setTimeout(() => successMsg.style.display = "none", 2000);

      renderAll();

      const firstItem = activeEl.querySelector(".prayer-item");
      if (firstItem){ firstItem.classList.add("new-highlight"); setTimeout(()=>firstItem.classList.remove("new-highlight"), 2200); }
      candle.classList.add("on"); setTimeout(()=>candle.classList.remove("on"), 2200);
    });

    // Initial render
    renderAll();
  </script>

  <footer>
    © 2025 Jesus Christ Saves Token. All Rights Reserved.
  </footer>
</body>
</html>
