<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jesus Christ Saves Token (JCS) ‚Äì Prayer Wall</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<style>
  body {
    margin: 0;
    font-family: 'Montserrat', sans-serif;
    color: #333;
    background-color: #001a33;
    background-image: url('cross2.png');
    background-repeat: no-repeat;
    background-position: center center;
    background-size: 50%;
    animation: fadeIn 1.5s ease-in-out;
  }
  #verse {
    transition: opacity 0.5s ease-in-out;
    text-align: center;
  }
  body::before {
    content: "";
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0, 26, 51, 0.6);
    z-index: 0;
  }
  nav {
    background: rgba(0,0,0,0.7);
    text-align: center;
    padding: 12px;
    position: relative;
    z-index: 2;
  }
  nav a {
    color: white;
    margin: 0 1rem;
    text-decoration: none;
    font-weight: bold;
    transition: 0.3s;
  }
  nav a:hover { color: #ffd700; transform: scale(1.05); }
  .container {
    max-width: 1100px;
    margin: 2rem auto;
    padding: 2rem;
    background: rgba(255,255,255,0.92);
    border-radius: 10px;
    box-shadow: 0 0 20px rgba(0,0,0,0.2);
    position: relative;
    z-index: 1;
    animation: fadeIn 1s ease-in-out;
  }
  .verse {
    background: #fff3cd;
    padding: 1rem;
    border-left: 6px solid #ffc107;
    font-size: 1.2rem;
    font-weight: bold;
    border-radius: 6px;
    margin-bottom: 1.5rem;
  }
  .prayer-wall-container { margin-top: 2rem; }
  .collapsible {
    background: #004e92;
    color: white;
    padding: 1rem;
    cursor: pointer;
    border: none;
    border-radius: 8px;
    font-weight: bold;
    transition: 0.3s;
  }
  .collapsible:hover { background: #0066cc; }
  .content { display: none; margin-top: 1rem; }
  .flex-sections { display: flex; gap: 20px; flex-wrap: wrap; }
  .section {
    flex: 1; min-width: 300px;
    background: #f9f9f9;
    border-radius: 8px;
    padding: 1rem;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
  }
  .section:hover { transform: translateY(-3px); }
  .prayer-wall-section {
    background: linear-gradient(145deg, #fdfdfd, #f1f7ff);
    border-radius: 15px;
    padding: 1.5rem;
    box-shadow: 0 0 20px rgba(0, 100, 255, 0.1);
    border: 1px solid rgba(0, 100, 255, 0.1);
  }
  .prayer-wall-section:hover { box-shadow: 0 0 25px rgba(0, 150, 255, 0.4); }
  .prayer-wall-section h3 {
    font-size: 1.6rem;
    color: #004e92;
    text-align: center;
    margin-bottom: 1rem;
    text-shadow: 0 0 8px rgba(0, 150, 255, 0.3);
  }
  .prayer-item {
    background: white;
    border-left: 4px solid #002147;
    border-radius: 10px;
    padding: 0.8rem;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    transition: transform 0.2s ease-in-out;
  }
  .prayer-item:hover { transform: scale(1.01); }
  .prayer-item button {
    background: #004e92;
    color: white;
    border: none;
    padding: 5px 10px;
    margin-left: 5px;
    border-radius: 5px;
    cursor: pointer;
    transition: 0.2s;
  }
  .prayer-item button:hover { background: #0066cc; }
  .prayer-item input[type="checkbox"] {
    transform: scale(1.2);
    margin-right: 10px;
  }
  @keyframes greenPulse {
    0% { box-shadow: 0 0 5px #28a745; }
    50% { box-shadow: 0 0 15px #28a745; }
    100% { box-shadow: 0 0 5px #28a745; }
  }
  .prayer-item input[type="checkbox"]:checked {
    border: 2px solid #28a745;
    background-color: #28a745;
    animation: greenPulse 1.5s infinite;
  }
  .prayer-form { display: flex; flex-direction: column; gap: 10px; }
  .prayer-form input, .prayer-form textarea {
    padding: 0.8rem;
    border-radius: 6px;
    border: 1px solid #ccc;
  }
  .prayer-form button {
    background: #004e92;
    color: white;
    padding: 0.8rem;
    border: none;
    border-radius: 6px;
  }
  .prayer-form button:hover { background: #0066cc; }
  #answered-list { max-height: 400px; overflow-y: auto; }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
</style>
</head>
<body>
<nav>
  <a href="index.html">Home</a>
</nav>

<div class="container">
  <h2>Our Mission</h2>
  <p>Jesus Christ Saves Token (JCS) is a faith-based cryptocurrency built on the XRP Ledger (XRPL) to embody Christian stewardship, transparency, and service through verifiable, low-cost transactions.</p>
  <div class="verse" id="verse">Loading verse‚Ä¶</div>
</div>

<div class="container prayer-wall-container">
  <button type="button" class="collapsible">Show / Hide Prayer Wall</button>
  <div class="content">
    <div class="flex-sections">
      <div class="section">
        <h3>Interactive Prayer Wall</h3>

        <!-- Login Form -->
        <div id="login-section" style="margin-bottom: 1rem;">
          <h3>Sign In</h3>
          <input type="text" id="login-name" placeholder="Name" required>
          <input type="password" id="login-password" placeholder="Password" required>
          <button id="login-btn">Login</button>
        </div>
        <div id="user-info" style="display:none; margin-bottom: 1rem;">
          Logged in as <span id="current-user"></span>
          <button id="logout-btn">Logout</button>
        </div>

        <form id="prayer-form" class="prayer-form">
          <textarea id="prayer" placeholder="Write your prayer..." rows="4" required></textarea>
          <label><input type="checkbox" id="private"> Keep my prayer private</label>
          <button type="submit">Submit Prayer</button>
          <div id="success-message" style="display:none;color:green;font-weight:bold;">Your prayer has been posted üôè</div>
        </form>
        <div id="prayers"></div>
      </div>
      <div class="section">
        <h3>Answered Prayers</h3>
        <div id="answered-list"></div>
      </div>
    </div>
  </div>
</div>

<script>
// Simple password hash (for demo)
function simpleHash(str) {
  let hash = 0;
  for (let i = 0; i < str.length; i++) {
    hash = (hash << 5) - hash + str.charCodeAt(i);
    hash |= 0;
  }
  return hash.toString();
}

let currentUser = JSON.parse(localStorage.getItem("currentUser") || "null");

function updateLoginUI() {
  const loginSection = document.getElementById("login-section");
  const userInfo = document.getElementById("user-info");
  if (currentUser) {
    loginSection.style.display = "none";
    userInfo.style.display = "block";
    document.getElementById("current-user").textContent = currentUser.name;
  } else {
    loginSection.style.display = "block";
    userInfo.style.display = "none";
  }
}

document.getElementById("login-btn").addEventListener("click", () => {
  const name = document.getElementById("login-name").value.trim();
  const password = document.getElementById("login-password").value;
  if (!name || password.length < 4) {
    alert("Name and password (4+ chars) required");
    return;
  }
  currentUser = { name, passHash: simpleHash(password) };
  localStorage.setItem("currentUser", JSON.stringify(currentUser));
  updateLoginUI();
});

document.getElementById("logout-btn").addEventListener("click", () => {
  localStorage.removeItem("currentUser");
  currentUser = null;
  updateLoginUI();
});

document.addEventListener("DOMContentLoaded", () => {
  updateLoginUI();

  const verseEl = document.getElementById("verse");
  const verses = [
    `"The thief comes only to steal and kill and destroy; I have come that they may have life, and have it to the full." ‚Äî John 10:10`,
    `"For God so loved the world that he gave his one and only Son, that whoever believes in him shall not perish but have eternal life." ‚Äî John 3:16`,
    `"I can do all things through Christ who strengthens me." ‚Äî Philippians 4:13`,
    `"The Lord is my shepherd, I lack nothing." ‚Äî Psalm 23:1`,
    `"Come to me, all you who are weary and burdened, and I will give you rest." ‚Äî Matthew 11:28`
  ];
  let currentVerse = 0;
  function updateVerse() {
    verseEl.style.opacity = 0;
    setTimeout(() => {
      verseEl.textContent = verses[currentVerse];
      verseEl.style.opacity = 1;
      currentVerse = (currentVerse + 1) % verses.length;
    }, 500);
  }
  updateVerse();
  setInterval(updateVerse, 20000);

  let prayers = JSON.parse(localStorage.getItem("prayers") || "[]")
    .filter(p => Date.now() - p.createdAt < 30 * 24 * 60 * 60 * 1000);

  const savePrayers = () => {
    localStorage.setItem("prayers", JSON.stringify(prayers));
  };

  const answeredEl = document.getElementById("answered-list");
  const renderPrayers = () => {
    answeredEl.innerHTML = "";
    prayers.forEach((p, index) => {
      const div = document.createElement("div");
      div.className = "prayer-item";

      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      checkbox.checked = p.read || false;
      checkbox.addEventListener("change", () => {
        p.read = checkbox.checked;
        savePrayers();
      });

      const prayerText = document.createElement("span");
      prayerText.textContent = ` ${p.name}: ${p.text}`;

      if (currentUser && (currentUser.name === p.name && currentUser.passHash === p.ownerHash || currentUser.name === "admin")) {
        const editBtn = document.createElement("button");
        editBtn.textContent = "Edit";
        editBtn.onclick = () => {
          const newText = prompt("Edit prayer text:", p.text);
          if (newText && newText.trim()) {
            p.text = newText.trim();
            savePrayers();
            renderPrayers();
          }
        };
        const delBtn = document.createElement("button");
        delBtn.textContent = "Delete";
        delBtn.onclick = () => {
          if (confirm("Delete this prayer?")) {
            prayers.splice(index, 1);
            savePrayers();
            renderPrayers();
          }
        };
        div.appendChild(editBtn);
        div.appendChild(delBtn);
      }

      div.insertBefore(prayerText, div.firstChild);
      div.insertBefore(checkbox, div.firstChild);
      answeredEl.appendChild(div);
    });
  };

  const form = document.getElementById("prayer-form");
  const successMsg = document.getElementById("success-message");
  form.onsubmit = e => {
    e.preventDefault();
    if (!currentUser) {
      alert("You must log in first");
      return;
    }
    const text = document.getElementById("prayer").value;
    const priv = document.getElementById("private").checked;
    prayers.push({
      name: currentUser.name,
      ownerHash: currentUser.passHash,
      text: priv ? "[Private Prayer]" : text,
      read: false,
      createdAt: Date.now()
    });
    savePrayers();
    form.reset();
    successMsg.style.display = "block";
    setTimeout(() => successMsg.style.display = "none", 2000);
    renderPrayers();
  };

  renderPrayers();

  const coll = document.querySelector(".collapsible");
  const content = document.querySelector(".content");
  const isOpen = localStorage.getItem("prayerWallOpen") === "true";
  if (isOpen) content.style.display = "block";
  coll.addEventListener("click", () => {
    content.style.display = content.style.display === "block" ? "none" : "block";
    localStorage.setItem("prayerWallOpen", content.style.display === "block");
  });
});
<script>
// ===== Simple password hash =====
function simpleHash(str) {
  let hash = 0;
  for (let i = 0; i < str.length; i++) {
    hash = (hash << 5) - hash + str.charCodeAt(i);
    hash |= 0; // convert to 32-bit int
  }
  return hash.toString();
}

// ===== Global State =====
let currentUser = JSON.parse(localStorage.getItem("currentUser") || "null");
let prayers = [];

// ===== Utility: Save prayers =====
function savePrayers() {
  localStorage.setItem("prayers", JSON.stringify(prayers));
}

// ===== Login UI Update =====
function updateLoginUI() {
  const loginSection = document.getElementById("login-section");
  const userInfo = document.getElementById("user-info");
  if (currentUser) {
    loginSection.style.display = "none";
    userInfo.style.display = "block";
    document.getElementById("current-user").textContent = currentUser.name;
  } else {
    loginSection.style.display = "block";
    userInfo.style.display = "none";
  }
}

// ===== Render Prayers =====
function renderPrayers() {
  const listEl = document.getElementById("prayers");
  const answeredEl = document.getElementById("answered-list");
  listEl.innerHTML = "";
  answeredEl.innerHTML = "";

  prayers.forEach((p, index) => {
    // Hide private prayers from non-owners/non-admin
    if (p.text === "[Private Prayer]" &&
       (!currentUser || (currentUser.name !== p.name && currentUser.name !== "admin"))) {
      return;
    }

    const div = document.createElement("div");
    div.className = "prayer-item";

    const checkbox = document.createElement("input");
    checkbox.type = "checkbox";
    checkbox.checked = p.read || false;
    checkbox.addEventListener("change", () => {
      p.read = checkbox.checked;
      savePrayers();
    });

    const prayerText = document.createElement("span");
    prayerText.textContent = ` ${p.name}: ${p.text}`;

    div.appendChild(checkbox);
    div.appendChild(prayerText);

    // Edit/Delete buttons if owner or admin
    if (currentUser &&
        (currentUser.name === p.name && currentUser.passHash === p.ownerHash ||
         currentUser.name === "admin")) {
      const editBtn = document.createElement("button");
      editBtn.textContent = "Edit";
      editBtn.onclick = () => {
        const newText = prompt("Edit prayer text:", p.text);
        if (newText && newText.trim()) {
          p.text = newText.trim();
          savePrayers();
          renderPrayers();
        }
      };

      const delBtn = document.createElement("button");
      delBtn.textContent = "Delete";
      delBtn.onclick = () => {
        if (confirm("Delete this prayer?")) {
          prayers.splice(index, 1);
          savePrayers();
          renderPrayers();
        }
      };

      div.appendChild(editBtn);
      div.appendChild(delBtn);
    }

    // Append to answered list if marked read
    if (p.read) {
      answeredEl.appendChild(div);
    } else {
      listEl.appendChild(div);
    }
  });
}

// ===== Submit Prayer =====
function handlePrayerSubmit(e) {
  e.preventDefault();
  if (!currentUser) {
    alert("You must log in first");
    return;
  }
  const text = document.getElementById("prayer").value.trim();
  const priv = document.getElementById("private").checked;
  if (!text) {
    alert("Prayer cannot be empty");
    return;
  }

  prayers.push({
    name: currentUser.name,
    ownerHash: currentUser.passHash,
    text: priv ? "[Private Prayer]" : text,
    read: false,
    createdAt: Date.now()
  });

  // Remove expired prayers (30 days)
  prayers = prayers.filter(p => Date.now() - p.createdAt < 30 * 24 * 60 * 60 * 1000);

  savePrayers();
  e.target.reset();
  document.getElementById("success-message").style.display = "block";
  setTimeout(() => document.getElementById("success-message").style.display = "none", 2000);
  renderPrayers();
}

// ===== Verse Rotation =====
function initVerseRotation() {
  const verseEl = document.getElementById("verse");
  const verses = [
    `"The thief comes only to steal and kill and destroy; I have come that they may have life, and have it to the full." ‚Äî John 10:10`,
    `"For God so loved the world that he gave his one and only Son..." ‚Äî John 3:16`,
    `"I can do all things through Christ who strengthens me." ‚Äî Philippians 4:13`,
    `"The Lord is my shepherd, I lack nothing." ‚Äî Psalm 23:1`,
    `"Come to me, all you who are weary..." ‚Äî Matthew 11:28`
  ];
  let current = 0;
  function showVerse() {
    verseEl.style.opacity = 0;
    setTimeout(() => {
      verseEl.textContent = verses[current];
      verseEl.style.opacity = 1;
      current = (current + 1) % verses.length;
    }, 500);
  }
  showVerse();
  setInterval(showVerse, 20000);
}

// ===== Collapsible Wall Toggle =====
function initCollapsible() {
  const coll = document.querySelector(".collapsible");
  const content = document.querySelector(".content");
  if (localStorage.getItem("prayerWallOpen") === "true") {
    content.style.display = "block";
  }
  coll.addEventListener("click", () => {
    const isVisible = content.style.display === "block";
    content.style.display = isVisible ? "none" : "block";
    localStorage.setItem("prayerWallOpen", !isVisible);
  });
}

// ===== Init =====
document.addEventListener("DOMContentLoaded", () => {
  updateLoginUI();

  // Load prayers from storage and filter expired
  prayers = JSON.parse(localStorage.getItem("prayers") || "[]")
    .filter(p => Date.now() - p.createdAt < 30 * 24 * 60 * 60 * 1000);

  renderPrayers();
  initVerseRotation();
  initCollapsible();

  // Event Listeners
  document.getElementById("login-btn").addEventListener("click", () => {
    const name = document.getElementById("login-name").value.trim();
    const password = document.getElementById("login-password").value;
    if (!name || password.length < 4) {
      alert("Name and password (4+ chars) required");
      return;
    }
    currentUser = { name, passHash: simpleHash(password) };
    localStorage.setItem("currentUser", JSON.stringify(currentUser));
    updateLoginUI();
    renderPrayers();
  });

  document.getElementById("logout-btn").addEventListener("click", () => {
    localStorage.removeItem("currentUser");
    currentUser = null;
    updateLoginUI();
    renderPrayers();
  });

  document.getElementById("prayer-form").addEventListener("submit", handlePrayerSubmit);
});


</script>
</body>
</html>

